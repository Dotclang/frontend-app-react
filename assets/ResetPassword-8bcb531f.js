import{r as d,a as N,u as y,j as s,L as P,b as v}from"./index-59b5839e.js";import{u as b,T as i,I as a,P as k}from"./PrimaryButton-af21eec8.js";import{I as n}from"./InputLabel-41b7431b.js";function _(){const{search:o}=v();return d.useMemo(()=>new URLSearchParams(o),[o])}function S(){const[o,l]=d.useState(!1);let{token:w}=N(),f=_().get("email");const{register:t,handleSubmit:p,formState:{errors:r},watch:x,setValue:g}=b({defaultValues:{email:f||"",token:w||"",password:"",password_confirmation:""}}),{resetPassword:j,error:e,status:c}=y(),u=x("password");d.useEffect(()=>()=>{g("password_confirmation","")},[u]);const h=async m=>{l(!0),await j(m),l(!1)};return s.jsxs(s.Fragment,{children:[c&&s.jsxs("div",{className:"mb-4 font-medium text-sm text-green-600 dark:text-green-400",children:[c,s.jsx(P,{to:"/login",className:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",children:"Login?"})]}),s.jsxs("form",{onSubmit:p(h),children:[s.jsxs("div",{children:[s.jsx(n,{htmlFor:"email",value:"Email"}),s.jsx(i,{id:"email",type:"email",name:"email",className:"mt-1 block w-full",autoComplete:"username",...t("email",{required:"Email is required"})}),r.email&&s.jsx(a,{message:r.email.message,className:"mt-2"}),e&&e.errors&&e.errors.email&&s.jsx(a,{message:e.errors.email[0],className:"mt-2"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(n,{htmlFor:"password",value:"Password"}),s.jsx(i,{id:"password",type:"password",name:"password",className:"mt-1 block w-full",autoComplete:"new-password",...t("password",{required:"Password is required"})}),r.password&&s.jsx(a,{message:r.password.message,className:"mt-2"}),e&&e.errors&&e.errors.password&&s.jsx(a,{message:e.errors.password[0],className:"mt-2"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(n,{htmlFor:"password_confirmation",value:"Confirm Password"}),s.jsx(i,{id:"password_confirmation",type:"password",name:"password_confirmation",className:"mt-1 block w-full",autoComplete:"new-password",...t("password_confirmation",{required:"Confirm Password is required",validate:m=>m===u||"Passwords do not match"})}),r.password_confirmation&&s.jsx(a,{message:r.password_confirmation.message,className:"mt-2"}),e&&e.errors&&e.errors.password_confirmation&&s.jsx(a,{message:e.errors.password_confirmation[0],className:"mt-2"})]}),s.jsx("div",{className:"flex items-center justify-end mt-4",children:s.jsx(k,{className:"ml-4",disabled:o,children:"Reset Password"})})]})]})}export{S as default};
